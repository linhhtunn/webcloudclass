<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
</head>
<body>
  <div class="container mt-5">
    <h1 class="text-center mb-4">Checkout</h1>
    <div class="row">
      <!-- Left Column: Customer Information & Payment -->
      <div class="card p-4 mb-4">
        <div class="row">
      <div class="col-12 col-md-6">
        <form>
          <!-- Các trường nhập thông tin -->
          <div class="mb-3">
            <label for="name" class="form-label">Họ và tên:</label>
            <input type="text" class="form-control" name="name" id="name" required>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input type="email" class="form-control" name="email" id="email" required>
          </div>
          <div class="mb-3">
            <label for="address" class="form-label">Địa chỉ:</label>
            <input type="text" class="form-control" name="address" id="address" required>
          </div>
          <div class="mb-3">
            <label for="city" class="form-label">Tỉnh/Thành phố:</label>
            <select class="form-select" name="city" id="city" required>
              <option value="">Chọn tỉnh/thành phố</option>
              <!-- Các option tỉnh/thành phố -->
              <option value="An Giang">An Giang</option>
                <option value="Bà Rịa - Vũng Tàu">Bà Rịa - Vũng Tàu</option>
                <option value="Bắc Giang">Bắc Giang</option>
                <option value="Bắc Kạn">Bắc Kạn</option>
                <option value="Bạc Liêu">Bạc Liêu</option>
                <option value="Bắc Ninh">Bắc Ninh</option>
                <option value="Bến Tre">Bến Tre</option>
                <option value="Bình Định">Bình Định</option>
                <option value="Bình Dương">Bình Dương</option>
                <option value="Bình Phước">Bình Phước</option>
                <option value="Bình Thuận">Bình Thuận</option>
                <option value="Cà Mau">Cà Mau</option>
                <option value="Cần Thơ">Cần Thơ</option>
                <option value="Cao Bằng">Cao Bằng</option>
                <option value="Đà Nẵng">Đà Nẵng</option>
                <option value="Đắk Lắk">Đắk Lắk</option>
                <option value="Đắk Nông">Đắk Nông</option>
                <option value="Điện Biên">Điện Biên</option>
                <option value="Đồng Nai">Đồng Nai</option>
                <option value="Đồng Tháp">Đồng Tháp</option>
                <option value="Gia Lai">Gia Lai</option>
                <option value="Hà Giang">Hà Giang</option>
                <option value="Hà Nam">Hà Nam</option>
                <option value="Hà Nội">Hà Nội</option>
                <option value="Hà Tĩnh">Hà Tĩnh</option>
                <option value="Hải Dương">Hải Dương</option>
                <option value="Hải Phòng">Hải Phòng</option>
                <option value="Hậu Giang">Hậu Giang</option>
                <option value="Hòa Bình">Hòa Bình</option>
                <option value="Hưng Yên">Hưng Yên</option>
                <option value="Khánh Hòa">Khánh Hòa</option>
                <option value="Kiên Giang">Kiên Giang</option>
                <option value="Kon Tum">Kon Tum</option>
                <option value="Lai Châu">Lai Châu</option>
                <option value="Lâm Đồng">Lâm Đồng</option>
                <option value="Lạng Sơn">Lạng Sơn</option>
                <option value="Lào Cai">Lào Cai</option>
                <option value="Long An">Long An</option>
                <option value="Nam Định">Nam Định</option>
                <option value="Nghệ An">Nghệ An</option>
                <option value="Ninh Bình">Ninh Bình</option>
                <option value="Ninh Thuận">Ninh Thuận</option>
                <option value="Phú Thọ">Phú Thọ</option>
                <option value="Phú Yên">Phú Yên</option>
                <option value="Quảng Bình">Quảng Bình</option>
                <option value="Quảng Nam">Quảng Nam</option>
                <option value="Quảng Ngãi">Quảng Ngãi</option>
                <option value="Quảng Ninh">Quảng Ninh</option>
                <option value="Quảng Trị">Quảng Trị</option>
                <option value="Sóc Trăng">Sóc Trăng</option>
                <option value="Sơn La">Sơn La</option>
                <option value="Tây Ninh">Tây Ninh</option>
                <option value="Thái Bình">Thái Bình</option>
                <option value="Thái Nguyên">Thái Nguyên</option>
                <option value="Thanh Hóa">Thanh Hóa</option>
                <option value="Thừa Thiên Huế">Thừa Thiên Huế</option>
                <option value="Tiền Giang">Tiền Giang</option>
                <option value="TP Hồ Chí Minh">TP Hồ Chí Minh</option>
                <option value="Trà Vinh">Trà Vinh</option>
                <option value="Tuyên Quang">Tuyên Quang</option>
                <option value="Vĩnh Long">Vĩnh Long</option>
                <option value="Vĩnh Phúc">Vĩnh Phúc</option>
                <option value="Yên Bái">Yên Bái</option>
              <!-- ... -->
            </select>
          </div>
          <!-- Phương thức thanh toán -->
          <div class="mb-4">
            <h5>Phương thức thanh toán</h5>
            <div class="form-check mb-2">
              <input class="form-check-input" type="radio" name="paymentMethod" id="qrPayment" value="qr">
              <label class="form-check-label" for="qrPayment">
                Thanh toán qua mã QR
              </label>
            </div>
            <div class="form-check mb-3">
              <input class="form-check-input" type="radio" name="paymentMethod" id="cardPayment" value="card">
              <label class="form-check-label" for="cardPayment">
                Thanh toán qua thẻ
              </label>
            </div>
            <!-- QR Payment Section -->
            <div id="qrSection" style="display: none;" class="mb-3">
              <div class="text-center">
                <img src="img/checkout.png" alt="QR Code" class="img-fluid" style="max-width: 200px;">
                <p class="mt-2">Quét mã QR để thanh toán</p>
              </div>
            </div>
            <!-- Card Payment Section -->
            <div id="cardSection" style="display: none;">
              <div class="mb-3">
                <label for="cardname" class="form-label">Tên chủ thẻ:</label>
                <input type="text" class="form-control" name="cardname" id="cardname" required>
              </div>
              <div class="mb-3">
                <label for="cardnumber" class="form-label">Số thẻ:</label>
                <input type="text" class="form-control" name="cardnumber" id="cardnumber" required>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="expiry" class="form-label">Ngày hết hạn:</label>
                  <input type="text" class="form-control" name="expiry" id="expiry" placeholder="MM/YY" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="cvv" class="form-label">CVV:</label>
                  <input type="text" class="form-control" name="cvv" id="cvv" placeholder="666" required>
                </div>
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary w-100">Xác nhận thanh toán</button>
        </form>
      </div>
      <!-- Right Column-->
      <div class="col-md-4 offset-md-2">
        <div class="card">
          <div class="card-header bg-info text-white">
            Product Summary
          </div>
          <div class="card-body" id="productSummary">
            <!-- Sản phẩm và tổng số tiền sẽ được hiển thị tại đây -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Success -->
  <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-success text-white">
          <h5 class="modal-title"><i class="fas fa-check-circle me-2"></i>Thông báo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center py-4">
          <div class="animation-ctn">
            <i class="fas fa-check-circle text-success mb-3" style="font-size: 60px;"></i>
          </div>
          <h4 class="mt-3">Thanh toán thành công!</h4>
          <p class="text-muted">Cảm ơn bạn đã mua hàng.</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-success px-4" onclick="window.location.href='index.html'">
            <i class="fas fa-home me-2"></i>Về trang chủ
          </button>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>
  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Cart data handling
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let productSummary = document.getElementById('productSummary');
      let total = 0;
      
      if (cart.length === 0) {
          productSummary.innerHTML = '<p>Your cart is empty.</p>';
      } else {
          cart.forEach(item => {
              productSummary.innerHTML += `<p>${item.name}: ${parseFloat(item.price).toLocaleString('vi-VN', { style: 'currency', currency: 'VND' })}</p>`;
              total += parseFloat(item.price);
          });
          productSummary.innerHTML += '<hr>';
          productSummary.innerHTML += `<h5>Total: ${total.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' })}</h5>`;
      }
  
      // Payment method handling
      const qrPayment = document.getElementById('qrPayment');
      const cardPayment = document.getElementById('cardPayment');
      const cardSection = document.getElementById('cardSection');
      const qrSection = document.getElementById('qrSection');
  
      qrPayment.addEventListener('change', function() {
          cardSection.style.display = 'none';
          qrSection.style.display = 'block';
          const cardFields = ['cardname', 'cardnumber', 'expiry', 'cvv'];
          cardFields.forEach(field => {
              const input = document.getElementById(field);
              if (input) {
                  input.required = false;
                  input.disabled = true;
              }
          });
      });
  
      cardPayment.addEventListener('change', function() {
          cardSection.style.display = 'block';
          qrSection.style.display = 'none';
          const cardFields = ['cardname', 'cardnumber', 'expiry', 'cvv'];
          cardFields.forEach(field => {
              const input = document.getElementById(field);
              if (input) {
                  input.required = true;
                  input.disabled = false;
              }
          });
      });
  
      // Form submission
      const form = document.querySelector('form');
      if (form) {
          form.addEventListener('submit', function(e) {
              e.preventDefault();
  
              if (!qrPayment.checked && !cardPayment.checked) {
                  alert('Vui lòng chọn phương thức thanh toán!');
                  return;
              }
  
              if (cardPayment.checked) {
                  const cardFields = ['cardname', 'cardnumber', 'expiry', 'cvv'];
                  for (let field of cardFields) {
                      const input = document.getElementById(field);
                      if (!input.value) {
                          alert('Vui lòng điền đầy đủ thông tin thẻ!');
                          return;
                      }
                  }
              }
  
              // Show success modal
              const successModal = new bootstrap.Modal(document.getElementById('successModal'));
              successModal.show();
              localStorage.removeItem('cart');
          });
      }
    });
  </script>
  <style>
    body {
      background-color: #f0f0f0;
    }
    .animation-ctn {
      animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</body>
</html>